<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Cheerp test</title>
  </head>
  <body>
    <h3>Possibly open the console, and press this button:</h3>
    <button onclick="fn()">Generate console output</button>
    <h3>Otherwise singe methods could be called by either directly</h3>
    <h3>cheerpMemUI.totalLiveMemory()</h3>
    <h4>Number of bytes currently allocated</h4>
    <h3>cheerpMemUI.lastSamples()</h3>
    <h4>Number of bytes allocated in the last profiling slots</h4>
    <h3>cheerpMemUI.liveAllocations()</h3>
    <h4>Object version with all current live allocations</h4>
    <h3>cheerpMemUI.liveAllocationsTopDown()</h3>
    <h4>Top Down tree of which function, and where on the call stack, generated an allocation</h4>
    <h3>cheerpMemUI.liveAllocationsBottomUp()</h3>
    <h4>Bottom up tree of which function, and where on the call stack, generated an allocation</h4>
    <h3>Another test is resizing the window (back and forth)</h3>
    <script type="module">
      import init from "/build/memoryHoarder.js";
      let {CheerpMemUI} = await init();
      let cheerpMemUI = new CheerpMemUI(-1, 100);
      function fn(){
        console.log('totalLiveMemory()\n', cheerpMemUI.totalLiveMemory());
        console.log('lastSamples()\n', cheerpMemUI.lastSamples());
        console.log('liveAllocations()\n', cheerpMemUI.liveAllocations());
        console.log('liveAllocationsTopDown()\n', cheerpMemUI.liveAllocationsTopDown());
        console.log('liveAllocationsBottomUp()\n', cheerpMemUI.liveAllocationsBottomUp());
      };
      window.cheerpMemUI = cheerpMemUI;
      window.fn = fn;
    </script>
</script>
    <h3>text</h3>
  </body>
</html>

